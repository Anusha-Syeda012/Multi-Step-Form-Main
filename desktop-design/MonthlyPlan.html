<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->
    <link rel="stylesheet" href="./monthlyPlan.css" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../assets/images/favicon-32x32.png"
    />
    <title>Frontend Mentor | Multi-step form</title>
    <script>
      let plan = 0;
      let planName = "";
      const value = "yearly";

      function toggle() {
        arcade();
        advance();
        pro();
      }
      window.onload = function () {
        plan = 9;
        planName = "Arcade";
        localStorage.setItem("plan", plan);
        localStorage.setItem("planName", planName);
      };
      function arcade() {
        const getMonth = document.getElementById("on-select");
        const getYearly = document.getElementById("yearly");
        const toggleSwitch = document.getElementById("switch");
        const getYear = document.getElementById("yr1");
        const getTemp = document.getElementById("temp1");
        // const value = "yearly";

        if (toggleSwitch.checked) {
          getTemp.textContent = "2 months free";
          getMonth.classList.add("on-select-light");
          getYearly.classList.add("on-select-dark");
          getYear.textContent = "$10/yr";
          localStorage.setItem("yearly", value);
          localStorage.removeItem("plan");
        } else {
          getYear.textContent = "$9/mo";
          getTemp.textContent = "";
          getMonth.classList.remove("on-select-light");
          getYearly.classList.remove("on-select-dark");
          localStorage.removeItem("yearly");

          // localStorage.clear();
        }
      }
      function advance() {
        // const value = "yearly";

        const toggleSwitch = document.getElementById("switch");
        const getYear = document.getElementById("yr2");
        const getTemp = document.getElementById("temp2");
        if (toggleSwitch.checked) {
          getYear.textContent = "$120/yr";
          getTemp.textContent = "2 months free";
          localStorage.setItem("yearly", value);
        } else {
          getYear.textContent = "$12/mo";
          getTemp.textContent = "";
          localStorage.removeItem("yearly");

          // localStorage.clear();
        }
      }
      function pro() {
        // const value = "yearly";
        const toggleSwitch = document.getElementById("switch");
        const getYear = document.getElementById("yr3");
        const getTemp = document.getElementById("temp3");
        if (toggleSwitch.checked) {
          getYear.textContent = "$150/yr";
          getTemp.textContent = "2 months free";
          localStorage.setItem("yearly", value);
        } else {
          getYear.textContent = "$15/mo";
          getTemp.textContent = "";
          localStorage.removeItem("yearly");
          localStorage.clear();
        }
      }
      function handleClick(id) {
        let btn = document.getElementById(id);
        let text = btn.getAttribute("id");
        let defaultBtn = document.getElementById("btn1");
        let defbtn2 = document.getElementById("btn2");
        let defbtn3 = document.getElementById("btn3");

        if (localStorage.getItem("yearly") !== "yearly") {
          if (text === "btn2") {
            localStorage.clear();
            plan = 12;
            planName = "Advanced";
            localStorage.setItem("plan", plan);
            localStorage.setItem("planName", planName);
            btn.classList.add("selected-option");
            defaultBtn.classList.remove("selected-option");
            defbtn3.classList.remove("selected-option");
          } else if (text === "btn3") {
            localStorage.clear();
            plan = 15;
            planName = "Pro";
            localStorage.setItem("plan", plan);
            localStorage.setItem("planName", planName);
            btn.classList.add("selected-option");
            defaultBtn.classList.remove("selected-option");
            defbtn2.classList.remove("selected-option");
          } else {
            // localStorage.removeItem("plan");
            localStorage.clear();
            plan = 9;
            planName = "Arcade";
            localStorage.setItem("plan", plan);
            localStorage.setItem("planName", planName);
            btn.classList.add("selected-option");
            defbtn3.classList.remove("selected-option");
            defbtn2.classList.remove("selected-option");
          }
        } else {
          if (text === "btn2") {
            localStorage.clear();
            localStorage.setItem("yearly", value);
            plan = 120;
            planName = "Advanced";
            localStorage.setItem("plan", plan);
            localStorage.setItem("planName", planName);
            btn.classList.add("selected-option");
            defaultBtn.classList.remove("selected-option");
            defbtn3.classList.remove("selected-option");
          } else if (text === "btn3") {
            localStorage.clear();
            localStorage.setItem("yearly", value);
            plan = 150;
            planName = "Pro";

            localStorage.setItem("plan", plan);
            localStorage.setItem("planName", planName);
            btn.classList.add("selected-option");
            defaultBtn.classList.remove("selected-option");
            defbtn2.classList.remove("selected-option");
          } else {
            // localStorage.removeItem("plan");
            localStorage.clear();
            localStorage.setItem("yearly", value);
            plan = 10;
            planName = "Arcade";
            localStorage.setItem("plan", plan);
            localStorage.setItem("planName", planName);
            btn.classList.add("selected-option");
            defbtn3.classList.remove("selected-option");
            defbtn2.classList.remove("selected-option");
          }
        }

        console.log(text);
      }
    </script>
  </head>
  <body>
    <!-- For Personal Info -->
    <main>
      <div class="sub-container bg-img">
        <div>
          <div class="row">
            <h2 class="for-firstChild highlited">1</h2>
            <div class="sub-col">
              <h6 class="resize">step 1</h6>
              <p>your info</p>
            </div>
          </div>

          <div class="row">
            <h2 class="highlited">2</h2>
            <div class="sub-col">
              <h6>step 2</h6>
              <p>select plan</p>
            </div>
          </div>

          <div class="row">
            <h2>3</h2>
            <div class="sub-col">
              <h6>step 3</h6>
              <p>Add-ons</p>
            </div>
          </div>

          <div class="row">
            <h2>4</h2>
            <div class="sub-col">
              <h6>step 4</h6>
              <p>summary</p>
            </div>
          </div>
        </div>
      </div>

      <summary class="text-section">
        <div class="main-container">
          <h1>Select your plan</h1>
          <p class="desc">You have the option of monthly or yearly biling.</p>
          <!-- Options for subscription  -->
          <div class="options">
            <button
              class="selected-option"
              id="btn1"
              value="arcade"
              onclick="handleClick(this.id)"
            >
              <img src="../assets/images/icon-arcade.svg" alt="Arcade" />

              <div>
                <span class="level">Arcade</span>
                <span id="yr1">$9/mo</span>
                <span class="trial" id="temp1"></span>
              </div>
            </button>

            <button
              class="custom-padding2"
              id="btn2"
              value="advance"
              onclick="handleClick(this.id)"
            >
              <img src="../assets/images/icon-advanced.svg" alt="Arcade" />

              <div>
                <span class="level">Advanced</span>
                <span id="yr2">$12/mo</span>
                <span class="trial" id="temp2"></span>
              </div>
            </button>

            <button
              class="last-btn custom-padding3"
              id="btn3"
              value="pro"
              onclick="handleClick(this.id)"
            >
              <img
                class="img-resize"
                src="../assets/images/icon-pro.svg"
                alt="Arcade"
              />

              <div>
                <span class="level">Pro</span>
                <span id="yr3">$15/mo</span>
                <span class="trial" id="temp3"></span>
              </div>
            </button>
          </div>

          <div class="check-opt">
            <h3 id="on-select">Monthly</h3>
            <input type="checkbox" id="switch" onchange="toggle()" />
            <label for="switch">Toggle</label>
            <h3 class="on-select-light" id="yearly">Yearly</h3>
          </div>
        </div>

        <footer class="grid display-down">
          <a href="../index.html">
            <input type="button" value="Go Back" class="btn-prev" />
          </a>
          <a href="./MonthlyAddOns.html">
            <input type="button" value="Next Step" class="btn-submit" />
          </a>
        </footer>
      </summary>
    </main>
  </body>
</html>
